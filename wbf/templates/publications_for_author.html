{# TODO: Make sure only english phrases and not just the first are displayed. #}
{# TODO: Do someting like the Routes to OA section at https://v2.sherpa.ac.uk/id/publisher_policy/2252 #}
{% import 'paper_macros.html' as paper_page %}
{% extends "base.html" %}
{% block content %}
<div class="container fs-5">
    <header class="container text-center lh-sm mt-5 mb-4">
        <h1>
            <a href="/" class="link-dark text-decoration-none" alt="Back to landing page">
                Free Your Science
            </a><br />
            {{ author.name }}
        </h1>
    </header>

    <main>
        <section>
            <h2 class="text-center mb-4">
                {{ papers_not_oa_nocost|length}} of {{ author.papers|length }} papers do not seem to be Open Access
                yet<br />
                but do have no-cost Open Access publisher policies<br />
            </h2>
            <div class="row mb-3 author-pubs">
                {% if papers_not_oa_nocost %}
                {% for paper in papers_not_oa_nocost %}
                <div class="col-lg-6 mb-3">
                    {{ paper_page.minimal(paper) }}
                    {{ paper_page.pathway_details(paper) }}
                </div>
                {% endfor %}
                {% else %}
                <p>No papers found in this category.</p>
                {% endif %}
            </div>
        </section>

        <section>
            <h2 class="mb-3">Other OA Policies</h2>
            <div class="row mb-3 author-pubs">
                {% if papers_other_policies %}
                {% for paper in papers_other_policies %}
                <div class="col-lg-6 mb-3">
                    {{ paper_page.minimal(paper) }}
                    {{ paper_page.pathway_details(paper) }}
                </div>
                {% endfor %}
                {% else %}
                <p>No papers found in this category.</p>
                {% endif %}
            </div>
        </section>

        <section>
            <h2 class="mb-3">OA Papers</h2>
            <div class="row mb-3 author-pubs">
                {% if papers_already_oa %}
                {% for paper in papers_already_oa %}
                <div class="col-lg-6  mb-3">
                    {{ paper_page.minimal(paper) }}
                </div>
                {% endfor %}
                {% else %}
                <p>No papers found in this category.</p>
                {% endif %}
            </div>
        </section>

        {% if papers_with_issues %}
        <section>
            <h2>Papers we had issues with</h2>
            <div class="container author-pubs">
                {% for paper in papers_with_issues %}
                <div class="paper-details">
                    <a href="https://doi.org/{{ paper.doi }}" class="link-secondary" target="_blank">
                        {{ paper.doi }}
                    </a>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}
    </main>
    <footer class="container text-center m-4">
        <small>
            (<a href="{{ author.profile_url }}" target="_blank" class="link-dark">Source Profile</a>
            that was used to retreive the author's papers.)
        </small>
    </footer>
</div>
{% endblock %}